<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Traffix Live Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <h1>TRAFFIX <span style="font-weight: 200;">Monitor</span></h1>
        <div class="filter-box">
            <button onclick="confirmReset()" class="reset-btn">Reset Database</button>

            <select id="agentSelect" onchange="updateDashboard()">
                <option value="all">All Agents</option>
            </select>
            <select id="timeframeSelect" onchange="updateDashboard()">
                <option value="all">All Time</option>
                <option value="15m">Last 15 Minutes</option>
                <option value="30m">Last 30 Minutes</option>
                <option value="1h">Last 1 Hour</option>
                <option value="2h">Last 2 Hours</option>
                <option value="5h">Last 5 Hours</option>
                <option value="24h">Last 24 Hours</option>
                <option value="36h">Last 36 Hours</option>
                <option value="48h">Last 48 Hours</option>
                <option value="1w">Last 1 Week</option>
                <option value="2w">Last 2 Weeks</option>
                <option value="1M">Last 1 Month</option>
                <option value="3M">Last 3 Months</option>
                <option value="1y">Last 1 Year</option>
            </select>
        </div>
    </header>

    <div id="security-alerts"></div>

    <div class="container">
        <div class="card full-width">
            <h3>Global Traffic Map</h3>
            <div id="map" style="height: 350px; border-radius: 8px;"></div>
        </div>
        
        <div class="card"><h3>Countries</h3><canvas id="countryChart"></canvas></div>
        <div class="card"><h3>Top Software</h3><canvas id="softwareChart"></canvas></div>
        <div class="card"><h3>Frequent IPs</h3><canvas id="ipChart"></canvas></div>
        <div class="card"><h3>Bandwidth Usage (MB)</h3><canvas id="bandwidthChart"></canvas></div>
        <div class="card full-width"><h3>Live Stream</h3><div id="log-container"></div></div>
    </div>

    <script src="js/scripts.js"></script>
</body>
</html>